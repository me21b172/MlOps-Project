schema: '2.0'
stages:
  extract_data:
    cmd: python model/extract_news_data.py
    params:
      params.yaml:
        extract_data.category_patterns:
          sport: \b(?:sport|sports|cricket|football|tennis|olympics)\b
          tech: \b(?:tech|technology|AI|artificial intelligence)\b
          entertainment: \b(?:entertainment|movie|bollywood|hollywood|actor|actress)\b
          business: \b(?:business|economy|market|stock|finance)\b
          politics: \b(?:politics|election|minister|government|parliament)\b
        extract_data.configuration:
          database: postgres
          user: postgres
          host: localhost
          password: AnujS@003
          port: 5432
        extract_data.feeds:
          Times Of India: https://timesofindia.indiatimes.com/rssfeeds/1221656.cms
          TOI: https://timesofindia.indiatimes.com/rssfeedstopstories.cms
          The Hindu: https://www.thehindu.com/news/national/?service=rss
          Economic Times: https://economictimes.indiatimes.com/rssfeedstopstories.cms
          India Today: https://www.indiatoday.in/rss/home
          NDTV: https://feeds.feedburner.com/ndtvnews-top-stories
    outs:
    - path: news_feed.csv
      hash: md5
      md5: cfd9aee681375fd20aacb54ac4f27206
      size: 53573
  extract_best_model:
    cmd: python model/register_best_model.py
    deps:
    - path: data/BBC News Train.csv
      hash: md5
      md5: 53d0cfd05cbadfe6ed367c633294f967
      size: 3351206
    params:
      params.yaml:
        model.batch_size:
        - 50
        - 64
        model.epochs:
        - 1
        model.lr:
        - 0.0001
        - 0.001
        - 0.01
        model.num_neurons:
        - 64
        - 256
        - 512
        model.runs: 1
    outs:
    - path: mlartifacts
      hash: md5
      md5: 4dbf861ed55b58b86bddab555bc2039b.dir
      size: 537332622
      nfiles: 17
    - path: mlruns
      hash: md5
      md5: ce16743656c4b42e15ffde03bafdf851.dir
      size: 3265
      nfiles: 28
  fine_tune_best_model:
    cmd: python model/fine_tune_best_model.py
    deps:
    - path: mlartifacts
      hash: md5
      md5: 1343b753e75156b54864825c8eeef49d.dir
      size: 1075133718
      nfiles: 34
    - path: mlruns
      hash: md5
      md5: 61a97817b58b186d3b788b7c44353a7d.dir
      size: 6011
      nfiles: 48
    outs:
    - path: metrics/classification_report.json
      hash: md5
      md5: 1b727a082a50aad0ec3c238aaf660b95
      size: 782
    - path: metrics/training_history.json
      hash: md5
      md5: bce99738c7c16636fbb2660e3fbe3589
      size: 88
