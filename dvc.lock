schema: '2.0'
stages:
  extract_data:
    cmd: python model/extract_news_data.py
    params:
      params.yaml:
        extract_data.category_patterns:
          sport: \b(?:sport|sports|cricket|football|tennis|olympics)\b
          tech: \b(?:tech|technology|AI|artificial intelligence)\b
          entertainment: \b(?:entertainment|movie|bollywood|hollywood|actor|actress)\b
          business: \b(?:business|economy|market|stock|finance)\b
          politics: \b(?:politics|election|minister|government|parliament)\b
        extract_data.configuration:
          database: postgres
          user: postgres
          host: localhost
          password: AnujS@003
          port: 5432
        extract_data.feeds:
          Times Of India: https://timesofindia.indiatimes.com/rssfeeds/1221656.cms
          TOI: https://timesofindia.indiatimes.com/rssfeedstopstories.cms
          The Hindu: https://www.thehindu.com/news/national/?service=rss
          Economic Times: https://economictimes.indiatimes.com/rssfeedstopstories.cms
          India Today: https://www.indiatoday.in/rss/home
          NDTV: https://feeds.feedburner.com/ndtvnews-top-stories
    outs:
    - path: news_feed.csv
      hash: md5
      md5: cfd9aee681375fd20aacb54ac4f27206
      size: 53573
  extract_best_model:
    cmd: python model/register_best_model.py
    deps:
    - path: model/BBC News Train.csv
      hash: md5
      md5: 53d0cfd05cbadfe6ed367c633294f967
      size: 3351206
    params:
      params.yaml:
        model.batch_size:
        - 32
        - 64
        model.epochs:
        - 1
        model.lr:
        - 0.0001
        - 0.001
        - 0.01
        model.num_neurons:
        - 64
        - 256
        - 512
        model.runs: 1
    outs:
    - path: mlartifacts
      hash: md5
      md5: f7009d2b734c386ce404c4a12e3297c6.dir
      size: 538917774
      nfiles: 17
    - path: mlruns
      hash: md5
      md5: d9047efa02a3436aebda9e86bf2ad2dd.dir
      size: 3267
      nfiles: 28
  fine_tune_best_model:
    cmd: python model/fine_tune_best_model.py
    deps:
    - path: mlartifacts
      hash: md5
      md5: c6f4ad242569282955b8e1e234afed04.dir
      size: 1078304022
      nfiles: 34
    - path: mlruns
      hash: md5
      md5: afbc84be0aa94628446a5ff32765e042.dir
      size: 6030
      nfiles: 48
    - path: news_feed.csv
      hash: md5
      md5: cfd9aee681375fd20aacb54ac4f27206
      size: 53573
    outs:
    - path: metrics/classification_report.json
      hash: md5
      md5: b3574522bfc89c2b0cf6ff5cb87960b6
      size: 924
    - path: metrics/training_history.json
      hash: md5
      md5: 72379926c7e8e919329262e843a9024a
      size: 104
