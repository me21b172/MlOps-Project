schema: '2.0'
stages:
  extract_data:
    cmd: python model/extract_news_data.py
    params:
      params.yaml:
        extract_data.category_patterns:
          sport: \b(?:sport|sports|cricket|football)\b
          tech: \b(?:tech|technology|AI|artificial intelligence)\b
          entertainment: \b(?:entertainment|movie|bollywood|hollywood|actor|actress)\b
          business: \b(?:business|economy|market|stock|finance)\b
          politics: \b(?:politics|election|minister|government|parliament)\b
        extract_data.configuration:
          database: postgres
          user: postgres
          host: localhost
          password: AnujS@003
          port: 5432
        extract_data.feeds:
          Times Of India: https://timesofindia.indiatimes.com/rssfeeds/1221656.cms
          TOI: https://timesofindia.indiatimes.com/rssfeedstopstories.cms
          The Hindu: https://www.thehindu.com/news/national/?service=rss
          Economic Times: https://economictimes.indiatimes.com/rssfeedstopstories.cms
          India Today: https://www.indiatoday.in/rss/home
          NDTV: https://feeds.feedburner.com/ndtvnews-top-stories
  extract_best_model:
    cmd: python model/register_best_model.py
    deps:
    - path: data/BBC News Train.csv
      hash: md5
      md5: 53d0cfd05cbadfe6ed367c633294f967
      size: 3351206
    params:
      params.yaml:
        model.batch_size:
        - 32
        - 64
        model.epochs:
        - 3
        model.lr:
        - 0.0001
        - 0.001
        - 0.01
        model.num_neurons:
        - 64
        - 128
        - 256
        model.runs: 8
  fine_tune_best_model:
    cmd: python model/fine_tune_best_model.py
    deps:
    - path: data/news_feed.csv
      hash: md5
      md5: e867249fa95c06cfe68947a44aceb700
      size: 15
    - path: mlartifacts
      hash: md5
      md5: c3b43c63a49d587c5d3782b1d9f5988a.dir
      size: 11804665476
      nfiles: 374
    outs:
    - path: metrics/classification_report.json
      hash: md5
      md5: aba3812419c7ed0d3c88a041599f5672
      size: 782
    - path: metrics/training_history.json
      hash: md5
      md5: 3659857bc53c980c128a6000c7e57e7e
      size: 89
